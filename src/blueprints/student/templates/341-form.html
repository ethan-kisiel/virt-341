{% extends 'base.html'%}

{% block title %}Excellence/Discrepancy Report Form{% endblock %}

{% block head_injection %}
<link href="{{ url_for('bp_student.static', filename='css/styles.css') }}" rel="stylesheet">
{% endblock %}


{% block content %}
<div class="container mt-4" id="container-341">

    <!-- Phase Information -->
    <div class="phase-container mb-4">
        {{ form.student_phase(class="form-control", id="studentPhase", placeholder="Student's Current Phase") }}
    </div>

    <!-- Form Container -->
    <div class="form-container">
        <!-- Form Title Section -->
        <div class="form-title">EXCELLENCE/DISCREPANCY REPORT</div>

        <form method="POST" action="/submit">
            {{ form.hidden_tag() }}

            <!-- Name and Grade (Read-only) -->
            <div class="form-row">
                <div class="form-cell large">
                    <label for="name">LAST NAME - FIRST NAME - MIDDLE INITIAL</label>
                    {{ form.name(class="form-control", id="name", readonly=True) }}
                </div>
                <div class="form-cell small">
                    <label for="grade">GRADE</label>
                    {{ form.grade(class="form-control", id="grade", readonly=True) }}
                </div>
            </div>

            <!-- Organization and Class/Flight (Read-only) -->
            <div class="form-row">
                <div class="form-cell large">
                    <label for="organization">ORGANIZATION</label>
                    {{ form.organization(class="form-control", id="organization", readonly=True) }}
                </div>
                <div class="form-cell small">
                    <label for="class-flight">CLASS/FLIGHT (If Applicable)</label>
                    {{ form.class_flight(class="form-control", id="class-flight", readonly=True) }}
                </div>
            </div>

            <!-- Editable Fields -->
            <!-- Excellence/Discrepancy (Editable) -->
            <div class="form-section">
                <label for="excellence-discrepancy">EXCELLENCE/EXHIBITED DISCREPANCY (Be specific)</label>
                {{ form.excellence_discrepancy(class="form-control", id="excellence-discrepancy") }}
            </div>

            <!-- Time, Date, Place, and Reporting Name (Editable) -->
            <div class="form-row">
                <div class="form-cell medium">
                    <label for="time">TIME</label>
                    {{ form.time(class="form-control", id="time") }}
                </div>
                <div class="form-cell medium">
                    <label for="date">DATE</label>
                    {{ form.date(class="form-control", id="date") }}
                </div>
                <div class="form-cell medium">
                    <label for="place">PLACE</label>
                    {{ form.place(class="form-control", id="place") }}
                </div>
            </div>
            <div class="form-row">
                <div class="form-cell large">
                    <label for="reporting-name">PRINTED NAME OF REPORTING INDIVIDUAL</label>
                    {{ form.reporting_name(class="form-control", id="reporting-name") }}
                </div>
            </div>
            <div class="form-cell large">
                <label for="signature">SIGNATURE OF REPORTING INDIVIDUAL</label>
                {{ form.signature(class="form-control", id="signature") }}
            </div>
            </div>

            <br>
            <button type="submit" class="btn btn-secondary">Sign</button>
        </form>

        <!-- Footer for Document Information -->
        <div class="form-footer">
            <div class="footer-left">
                <span style="font-weight: bold;">AETC FORM 341, 20070815</span><br>
                <span style="font-weight: normal;">Prescribed by: AETCI36-2651</span>
            </div>
            <div class="footer-right">
                PREVIOUS EDITION IS OBSOLETE.
            </div>
        </div>
    </div>
</div>

<div class="container mt-4" id="container-341">
    <div class="qr-code-section">
        <h3>Scan QR Code to Access This Form:</h3>
        <img src="{{ url_for('bp_student.generate_student_qr', student_id=student.id) }}" alt="Student QR Code">
        <p>First Name: {{ student.user.first_name }}</p>
        <p>Last Name: {{ student.user.last_name }}</p>
        <p>Rank: {{ student.user.rank }}</p>
        <p>Class Flight: {{ student.class_flight }}</p>
        <p>Organization: {{ student.user.organization }}</p>
        <p>MTL: {{ student.supervisor.first_name }} {{ student.supervisor.last_name }}</p>
    </div>
</div>
{% endblock %}


{% block body_bottom_injection %}
<script src="{{ url_for('bp_student.static', filename='js/341-form.js') }}"></script>
{% endblock %}
